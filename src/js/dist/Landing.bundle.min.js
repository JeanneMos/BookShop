"use strict";(self.webpackChunkespace_souvenir=self.webpackChunkespace_souvenir||[]).push([[1],{2849:function(e,t,n){n.d(t,{A8:function(){return d},BN:function(){return c},Bn:function(){return h},C_:function(){return b},Gn:function(){return i},Il:function(){return r},JT:function(){return o},ML:function(){return v},Mm:function(){return _},Nn:function(){return L},Qd:function(){return a},Qo:function(){return w},Qv:function(){return k},Qy:function(){return T},R$:function(){return f},Th:function(){return u},Ti:function(){return s},Y_:function(){return m},hZ:function(){return N},j5:function(){return p},jU:function(){return C},r2:function(){return y},rG:function(){return E},sY:function(){return Z},ts:function(){return l},u1:function(){return g}});var r=649,a=6e5,c=8,s="https://jsonplaceholder.typicode.com/posts",u="/es/get-menu/footer",l="/es/get-current-user",i="/es/get-espace-entity",o="/es/get-messages",m="/es/get-number-message",f="/es/entity-save-field",d="/es/message-save-field",h="/es/get-user",p="/es/user-update",v="/es/message/create",g="/es/user/reset-password",E="field_es_homage",y="field_es_bio",_="field_es_profile_image",b="status",N="messagesAccueil",T="messagesList",w="numberMessages",k="accueil",Z="messages",L="biographie",C="<br />"},4698:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(5697),a=n.n(r),c=n(7294),s=n(5998),u=n(9711);var l=function(e){var t=e.data,n=e.isFetching,r=e.error;return c.createElement("footer",null,n?"Fetching":null,isNaN(t)||r&&c.createElement("p",{className:"fetch-error-message"},"Nous avons rencontré une erreur, merci de réessayer plus tard"),t&&t.length&&c.createElement("ul",{className:"footer-nav","data-testid":"footerFetchedLinks"},t.map((function(e){return c.createElement("li",{key:e.title},c.createElement(u.rU,{to:e.url},e.title))}))),c.createElement(u.rU,{to:"/main-page/1",style:{marginLeft:"15px"}},"Contenu du ES"))},i=n(6974),o=n(2849),m=n(9973),f=n(2791),d=n(1363),h=n(1628);function p(){return c.createElement("div",{className:"loader-login"},c.createElement("svg",{"aria-hidden":"true",width:"26",height:"30",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 32"},c.createElement("path",{d:"m5.495 17.895 2.161-.999a7.773 7.773 0 0 0 1.81-1.116l.21-.176.227.152a6.203 6.203 0 0 0 6.962 0l.218-.147.209.162a9.29 9.29 0 0 0 1.817 1.125l2.166 1c2.593 1.193 4.27 3.825 4.27 6.705v4.195h-.096c-.177 1.09-1.11 1.925-2.232 1.925H3.484c-1.247 0-2.261-1.032-2.261-2.301v-3.819c0-2.88 1.677-5.512 4.272-6.706m1.912-9.498c0-3.944 2.666-7.152 5.944-7.152 3.277 0 5.945 3.208 5.945 7.152s-2.668 7.154-5.945 7.154c-3.278 0-5.944-3.21-5.944-7.154M0 24.601v3.854C0 30.409 1.563 32 3.484 32h19.733c1.902 0 3.45-1.59 3.45-3.545V24.6c.032-3.369-1.912-6.448-4.952-7.845l-2.164-.999a5.23 5.23 0 0 1-1.227-.736l-.307-.25.266-.296c1.42-1.584 2.234-3.799 2.234-6.078C20.517 3.768 17.301 0 13.351 0 9.4.033 6.184 3.815 6.184 8.432c0 2.315.793 4.473 2.233 6.076l.28.31-.334.247c-.412.306-.82.527-1.2.72L4.988 16.79C1.958 18.15 0 21.216 0 24.601",fill:"#696969",fillRule:"evenodd"})),c.createElement("span",{"aria-hidden":!0,className:"user-login-connexion"},"Se connecter"),c.createElement("span",{className:"sr-only"},"Patientez"))}function v(){return c.createElement(u.rU,{to:"/",className:"banner-link","data-testid":"bannerLink"},"Espace Souvenirs")}var g=c.lazy((function(){return Promise.all([n.e(835),n.e(120)]).then(n.bind(n,4926))})),E=c.lazy((function(){return Promise.all([n.e(835),n.e(387)]).then(n.bind(n,1561))}));function y(){var e=(0,s.v9)((function(e){return e.administrator})),t=(0,s.I0)(),n=(0,i.UO)().espaceId,r=(0,h.Z)({key:"current-user",API:o.ts,staleTime:1e4,cacheTime:1/0}),a=r.data,u=r.isFetching;r.error;return(0,c.useEffect)((function(){if(a&&null!=a&&a.field_user_email){t((0,m.nD)());var e=a.field_user_surname,r=a.field_user_name,c=a.field_user_phone,s=a.field_user_email,u=a.field_user_civility,l=a.user_gp_entity,i={lastName:e,firstName:r,phone:c,email:s,civility:u,gp_entities:l},o=(0,d.B)(l).includes(n);(0,d.B)(l).length&&t((0,m.Vy)({isAdmin:o})),t((0,m.n0)({user:i}))}else t((0,m.n0)({user:null})),t((0,m.Vy)({isAdmin:!1})),t((0,m._e)())}),[a]),c.createElement("header",null,c.createElement(v,null),u&&c.createElement(p,null),!u&&e.isLogged&&c.createElement(c.Suspense,{fallback:c.createElement("p",null,"attendez...")},c.createElement(g,null)),!u&&!e.isLogged&&c.createElement(c.Suspense,{fallback:c.createElement("p",null,"attendez...")},c.createElement(E,{handleLogIn:function(){t((0,f.bz)({theme:"dark",hasCloseButton:!0,modalType:"LoginModal"}))}})))}var _=c.lazy((function(){return Promise.all([n.e(154),n.e(111),n.e(5),n.e(597),n.e(835),n.e(711),n.e(896)]).then(n.bind(n,9532))}));function b(e){var t=e.children,n=(0,s.v9)((function(e){return e.modal})),r=(0,h.Z)({key:"footer",API:o.Th,staleTime:3e5,cacheTime:1/0}),a=r.data,u=r.error,i=r.isFetching;return c.createElement(c.Fragment,null,c.createElement(y,null),c.createElement("main",null,t),c.createElement(l,{data:a,error:u,isFetching:i}),n.isOpen&&c.createElement(_,{theme:n.theme}))}b.propTypes={children:a().node.isRequired}},2004:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(7294),a=n(885),c=n(2849),s=n(1628),u=n(1295),l=n(4421),i=n.p+"999530a9c78bcd2cc87cc59fc705a6a8.jpg",o=n(5697),m=n.n(o);function f(e){var t=e.profiles;return r.createElement("ul",{className:"search-results","data-testid":"searchResults"},t.map((function(e){return r.createElement("li",{className:"search-result-item",key:"profile_".concat(e.id)},r.createElement("img",{width:"110",height:"60",alt:"",src:i}),r.createElement("div",{className:"search-result-description"},e.title))})))}function d(){var e=(0,r.useState)([]),t=(0,a.Z)(e,2),n=t[0],i=t[1],o=(0,r.useState)(""),m=(0,a.Z)(o,2),d=m[0],h=m[1],p=(0,s.Z)({key:"posts",API:c.Ti,staleTime:3e4,cacheTime:1/0}),v=p.data,g=p.error,E=p.isFetching;return r.createElement("div",{className:"search-wrapper"},r.createElement("form",{onSubmit:function(e){e.preventDefault()},className:"search-form"},r.createElement("fieldset",null,r.createElement("legend",null,"Recherche d'un espace souvenirs"),r.createElement("div",{className:"search"},r.createElement("input",{"data-testid":"searchInput",type:"search",placeholder:"Rechercher le nom de votre proche disparu",value:d,onChange:function(e){var t=e.target;if(h(t.value),t.value.length>3&&v&&v.length){var n=v.filter((function(e){return e.title.includes(t.value.toLowerCase())})),r=n.length>5?n.slice(0,5):n;i(r)}else i([])}}),r.createElement("button",{type:"submit",className:"search-button"},r.createElement(u.default,{name:"recherche",iconClass:"search-icon"}))))),E?r.createElement(l.Z,{position:"center"}):null,g?"Désolé il y a une erreur, merci de réessayer plus tard":null,Number.isNaN(v)&&r.createElement("p",{className:"fetch-error-message"},"Nous avons rencontré une erreur, merci de réessayer plus tard"),n&&n.length?r.createElement(f,{profiles:n}):null)}f.propTypes={profiles:m().arrayOf(m().objectOf(m().any)).isRequired};var h=n(4698),p=n(7959);function v(){return(0,r.useEffect)((function(){document.title="Landing page",(0,p.Z)()}),[]),r.createElement(h.Z,null,r.createElement("div",{className:"landing-wrapper"},r.createElement(d,null)))}},1363:function(e,t,n){n.d(t,{B:function(){return r}});var r=function(e){return e||[]}},7959:function(e,t,n){function r(e){e&&e.focus({preventScroll:!0}),window.scrollTo({top:(null==e?void 0:e.offsetTop)||0,behavior:"smooth"})}n.d(t,{Z:function(){return r}})},1628:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(5861),a=n(7757),c=n.n(a),s=n(9669),u=n.n(s),l=(n(7294),n(8767));function i(e){var t=e.key,n=e.API,a=e.staleTime,s=void 0===a?0:a,i=e.cacheTime,o=void 0===i?0:i,m=e.refetchOnMount,f=void 0!==m&&m,d=e.refetchOnWindowFocus,h=void 0!==d&&d,p=e.enabled,v=void 0===p||p;return(0,l.useQuery)(t,(0,r.Z)(c().mark((function e(){var t,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u().get(n);case 3:return t=e.sent,e.next=6,null==t?void 0:t.data;case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{error:!0,status:null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),{staleTime:s,cacheTime:o,refetchOnMount:f,refetchOnWindowFocus:h,enabled:v})}}}]);