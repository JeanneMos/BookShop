"use strict";(self.webpackChunkespace_souvenir=self.webpackChunkespace_souvenir||[]).push([[164],{2849:function(e,n,t){t.d(n,{A8:function(){return d},BN:function(){return i},Bn:function(){return h},C_:function(){return b},Gn:function(){return l},Il:function(){return r},JT:function(){return o},ML:function(){return p},Mm:function(){return y},Nn:function(){return Z},Qd:function(){return u},Qo:function(){return w},Qv:function(){return N},Qy:function(){return k},R$:function(){return m},Th:function(){return c},Ti:function(){return a},Y_:function(){return f},hZ:function(){return T},j5:function(){return v},jU:function(){return F},r2:function(){return _},rG:function(){return E},sY:function(){return L},ts:function(){return s},u1:function(){return g}});var r=649,u=6e5,i=8,a="https://jsonplaceholder.typicode.com/posts",c="/es/get-menu/footer",s="/es/get-current-user",l="/es/get-espace-entity",o="/es/get-messages",f="/es/get-number-message",m="/es/entity-save-field",d="/es/message-save-field",h="/es/get-user",v="/es/user-update",p="/es/message/create",g="/es/user/reset-password",E="field_es_homage",_="field_es_bio",y="field_es_profile_image",b="status",T="messagesAccueil",k="messagesList",w="numberMessages",N="accueil",L="messages",Z="biographie",F="<br />"},4698:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(5697),u=t.n(r),i=t(7294),a=t(5998),c=t(9711);var s=function(e){var n=e.data,t=e.isFetching,r=e.error;return i.createElement("footer",null,t?"Fetching":null,isNaN(n)||r&&i.createElement("p",{className:"fetch-error-message"},"Nous avons rencontré une erreur, merci de réessayer plus tard"),n&&n.length&&i.createElement("ul",{className:"footer-nav","data-testid":"footerFetchedLinks"},n.map((function(e){return i.createElement("li",{key:e.title},i.createElement(c.rU,{to:e.url},e.title))}))),i.createElement(c.rU,{to:"/main-page/1",style:{marginLeft:"15px"}},"Contenu du ES"))},l=t(6974),o=t(2849),f=t(9973),m=t(2791),d=t(1363),h=t(1628);function v(){return i.createElement("div",{className:"loader-login"},i.createElement("svg",{"aria-hidden":"true",width:"26",height:"30",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 32"},i.createElement("path",{d:"m5.495 17.895 2.161-.999a7.773 7.773 0 0 0 1.81-1.116l.21-.176.227.152a6.203 6.203 0 0 0 6.962 0l.218-.147.209.162a9.29 9.29 0 0 0 1.817 1.125l2.166 1c2.593 1.193 4.27 3.825 4.27 6.705v4.195h-.096c-.177 1.09-1.11 1.925-2.232 1.925H3.484c-1.247 0-2.261-1.032-2.261-2.301v-3.819c0-2.88 1.677-5.512 4.272-6.706m1.912-9.498c0-3.944 2.666-7.152 5.944-7.152 3.277 0 5.945 3.208 5.945 7.152s-2.668 7.154-5.945 7.154c-3.278 0-5.944-3.21-5.944-7.154M0 24.601v3.854C0 30.409 1.563 32 3.484 32h19.733c1.902 0 3.45-1.59 3.45-3.545V24.6c.032-3.369-1.912-6.448-4.952-7.845l-2.164-.999a5.23 5.23 0 0 1-1.227-.736l-.307-.25.266-.296c1.42-1.584 2.234-3.799 2.234-6.078C20.517 3.768 17.301 0 13.351 0 9.4.033 6.184 3.815 6.184 8.432c0 2.315.793 4.473 2.233 6.076l.28.31-.334.247c-.412.306-.82.527-1.2.72L4.988 16.79C1.958 18.15 0 21.216 0 24.601",fill:"#696969",fillRule:"evenodd"})),i.createElement("span",{"aria-hidden":!0,className:"user-login-connexion"},"Se connecter"),i.createElement("span",{className:"sr-only"},"Patientez"))}function p(){return i.createElement(c.rU,{to:"/",className:"banner-link","data-testid":"bannerLink"},"Espace Souvenirs")}var g=i.lazy((function(){return Promise.all([t.e(835),t.e(120)]).then(t.bind(t,4926))})),E=i.lazy((function(){return Promise.all([t.e(835),t.e(387)]).then(t.bind(t,1561))}));function _(){var e=(0,a.v9)((function(e){return e.administrator})),n=(0,a.I0)(),t=(0,l.UO)().espaceId,r=(0,h.Z)({key:"current-user",API:o.ts,staleTime:1e4,cacheTime:1/0}),u=r.data,c=r.isFetching;r.error;return(0,i.useEffect)((function(){if(u&&null!=u&&u.field_user_email){n((0,f.nD)());var e=u.field_user_surname,r=u.field_user_name,i=u.field_user_phone,a=u.field_user_email,c=u.field_user_civility,s=u.user_gp_entity,l={lastName:e,firstName:r,phone:i,email:a,civility:c,gp_entities:s},o=(0,d.B)(s).includes(t);(0,d.B)(s).length&&n((0,f.Vy)({isAdmin:o})),n((0,f.n0)({user:l}))}else n((0,f.n0)({user:null})),n((0,f.Vy)({isAdmin:!1})),n((0,f._e)())}),[u]),i.createElement("header",null,i.createElement(p,null),c&&i.createElement(v,null),!c&&e.isLogged&&i.createElement(i.Suspense,{fallback:i.createElement("p",null,"attendez...")},i.createElement(g,null)),!c&&!e.isLogged&&i.createElement(i.Suspense,{fallback:i.createElement("p",null,"attendez...")},i.createElement(E,{handleLogIn:function(){n((0,m.bz)({theme:"dark",hasCloseButton:!0,modalType:"LoginModal"}))}})))}var y=i.lazy((function(){return Promise.all([t.e(154),t.e(111),t.e(5),t.e(597),t.e(835),t.e(711),t.e(896)]).then(t.bind(t,9532))}));function b(e){var n=e.children,t=(0,a.v9)((function(e){return e.modal})),r=(0,h.Z)({key:"footer",API:o.Th,staleTime:3e5,cacheTime:1/0}),u=r.data,c=r.error,l=r.isFetching;return i.createElement(i.Fragment,null,i.createElement(_,null),i.createElement("main",null,n),i.createElement(s,{data:u,error:c,isFetching:l}),t.isOpen&&i.createElement(y,{theme:t.theme}))}b.propTypes={children:u().node.isRequired}},2787:function(e,n,t){t.r(n),t.d(n,{default:function(){return c}});var r=t(7294),u=t(1711),i=t(4698),a=t(7959);function c(){return(0,r.useEffect)((function(){document.title="Page d'utilisateur",(0,a.Z)()}),[]),r.createElement(i.Z,null,r.createElement("div",{className:"user-admin-login"},r.createElement(u.Z,null)))}},1363:function(e,n,t){t.d(n,{B:function(){return r}});var r=function(e){return e||[]}},7959:function(e,n,t){function r(e){e&&e.focus({preventScroll:!0}),window.scrollTo({top:(null==e?void 0:e.offsetTop)||0,behavior:"smooth"})}t.d(n,{Z:function(){return r}})},1628:function(e,n,t){t.d(n,{Z:function(){return l}});var r=t(5861),u=t(7757),i=t.n(u),a=t(9669),c=t.n(a),s=(t(7294),t(8767));function l(e){var n=e.key,t=e.API,u=e.staleTime,a=void 0===u?0:u,l=e.cacheTime,o=void 0===l?0:l,f=e.refetchOnMount,m=void 0!==f&&f,d=e.refetchOnWindowFocus,h=void 0!==d&&d,v=e.enabled,p=void 0===v||v;return(0,s.useQuery)(n,(0,r.Z)(i().mark((function e(){var n,r,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c().get(t);case 3:return n=e.sent,e.next=6,null==n?void 0:n.data;case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{error:!0,status:null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),{staleTime:a,cacheTime:o,refetchOnMount:m,refetchOnWindowFocus:h,enabled:p})}}}]);