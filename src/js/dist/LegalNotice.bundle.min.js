"use strict";(self.webpackChunkespace_souvenir=self.webpackChunkespace_souvenir||[]).push([[428],{2849:function(e,n,t){t.d(n,{A8:function(){return d},BN:function(){return a},Bn:function(){return h},C_:function(){return b},Gn:function(){return s},Il:function(){return r},JT:function(){return o},ML:function(){return v},Mm:function(){return _},Nn:function(){return L},Qd:function(){return u},Qo:function(){return k},Qv:function(){return w},Qy:function(){return T},R$:function(){return f},Th:function(){return l},Ti:function(){return i},Y_:function(){return m},hZ:function(){return N},j5:function(){return p},jU:function(){return Z},r2:function(){return y},rG:function(){return E},sY:function(){return F},ts:function(){return c},u1:function(){return g}});var r=649,u=6e5,a=8,i="https://jsonplaceholder.typicode.com/posts",l="/es/get-menu/footer",c="/es/get-current-user",s="/es/get-espace-entity",o="/es/get-messages",m="/es/get-number-message",f="/es/entity-save-field",d="/es/message-save-field",h="/es/get-user",p="/es/user-update",v="/es/message/create",g="/es/user/reset-password",E="field_es_homage",y="field_es_bio",_="field_es_profile_image",b="status",N="messagesAccueil",T="messagesList",k="numberMessages",w="accueil",F="messages",L="biographie",Z="<br />"},4698:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(5697),u=t.n(r),a=t(7294),i=t(5998),l=t(9711);var c=function(e){var n=e.data,t=e.isFetching,r=e.error;return a.createElement("footer",null,t?"Fetching":null,isNaN(n)||r&&a.createElement("p",{className:"fetch-error-message"},"Nous avons rencontré une erreur, merci de réessayer plus tard"),n&&n.length&&a.createElement("ul",{className:"footer-nav","data-testid":"footerFetchedLinks"},n.map((function(e){return a.createElement("li",{key:e.title},a.createElement(l.rU,{to:e.url},e.title))}))),a.createElement(l.rU,{to:"/main-page/1",style:{marginLeft:"15px"}},"Contenu du ES"))},s=t(6974),o=t(2849),m=t(9973),f=t(2791),d=t(1363),h=t(1628);function p(){return a.createElement("div",{className:"loader-login"},a.createElement("svg",{"aria-hidden":"true",width:"26",height:"30",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 27 32"},a.createElement("path",{d:"m5.495 17.895 2.161-.999a7.773 7.773 0 0 0 1.81-1.116l.21-.176.227.152a6.203 6.203 0 0 0 6.962 0l.218-.147.209.162a9.29 9.29 0 0 0 1.817 1.125l2.166 1c2.593 1.193 4.27 3.825 4.27 6.705v4.195h-.096c-.177 1.09-1.11 1.925-2.232 1.925H3.484c-1.247 0-2.261-1.032-2.261-2.301v-3.819c0-2.88 1.677-5.512 4.272-6.706m1.912-9.498c0-3.944 2.666-7.152 5.944-7.152 3.277 0 5.945 3.208 5.945 7.152s-2.668 7.154-5.945 7.154c-3.278 0-5.944-3.21-5.944-7.154M0 24.601v3.854C0 30.409 1.563 32 3.484 32h19.733c1.902 0 3.45-1.59 3.45-3.545V24.6c.032-3.369-1.912-6.448-4.952-7.845l-2.164-.999a5.23 5.23 0 0 1-1.227-.736l-.307-.25.266-.296c1.42-1.584 2.234-3.799 2.234-6.078C20.517 3.768 17.301 0 13.351 0 9.4.033 6.184 3.815 6.184 8.432c0 2.315.793 4.473 2.233 6.076l.28.31-.334.247c-.412.306-.82.527-1.2.72L4.988 16.79C1.958 18.15 0 21.216 0 24.601",fill:"#696969",fillRule:"evenodd"})),a.createElement("span",{"aria-hidden":!0,className:"user-login-connexion"},"Se connecter"),a.createElement("span",{className:"sr-only"},"Patientez"))}function v(){return a.createElement(l.rU,{to:"/",className:"banner-link","data-testid":"bannerLink"},"Espace Souvenirs")}var g=a.lazy((function(){return Promise.all([t.e(835),t.e(120)]).then(t.bind(t,4926))})),E=a.lazy((function(){return Promise.all([t.e(835),t.e(387)]).then(t.bind(t,1561))}));function y(){var e=(0,i.v9)((function(e){return e.administrator})),n=(0,i.I0)(),t=(0,s.UO)().espaceId,r=(0,h.Z)({key:"current-user",API:o.ts,staleTime:1e4,cacheTime:1/0}),u=r.data,l=r.isFetching;r.error;return(0,a.useEffect)((function(){if(u&&null!=u&&u.field_user_email){n((0,m.nD)());var e=u.field_user_surname,r=u.field_user_name,a=u.field_user_phone,i=u.field_user_email,l=u.field_user_civility,c=u.user_gp_entity,s={lastName:e,firstName:r,phone:a,email:i,civility:l,gp_entities:c},o=(0,d.B)(c).includes(t);(0,d.B)(c).length&&n((0,m.Vy)({isAdmin:o})),n((0,m.n0)({user:s}))}else n((0,m.n0)({user:null})),n((0,m.Vy)({isAdmin:!1})),n((0,m._e)())}),[u]),a.createElement("header",null,a.createElement(v,null),l&&a.createElement(p,null),!l&&e.isLogged&&a.createElement(a.Suspense,{fallback:a.createElement("p",null,"attendez...")},a.createElement(g,null)),!l&&!e.isLogged&&a.createElement(a.Suspense,{fallback:a.createElement("p",null,"attendez...")},a.createElement(E,{handleLogIn:function(){n((0,f.bz)({theme:"dark",hasCloseButton:!0,modalType:"LoginModal"}))}})))}var _=a.lazy((function(){return Promise.all([t.e(154),t.e(111),t.e(5),t.e(597),t.e(835),t.e(711),t.e(896)]).then(t.bind(t,9532))}));function b(e){var n=e.children,t=(0,i.v9)((function(e){return e.modal})),r=(0,h.Z)({key:"footer",API:o.Th,staleTime:3e5,cacheTime:1/0}),u=r.data,l=r.error,s=r.isFetching;return a.createElement(a.Fragment,null,a.createElement(y,null),a.createElement("main",null,n),a.createElement(c,{data:u,error:l,isFetching:s}),t.isOpen&&a.createElement(_,{theme:t.theme}))}b.propTypes={children:u().node.isRequired}},6171:function(e,n,t){t.r(n),t.d(n,{default:function(){return c}});var r=t(7294),u=t(2849),a=t(4698),i=t(7959),l=t(1628);function c(){var e,n=(0,l.Z)({key:"posts",API:u.Ti,staleTime:1e4,cacheTime:3e5}),t=n.data,c=n.isFetching;n.error;return(0,r.useEffect)((function(){document.title="Mentions légales",(0,i.Z)()}),[]),r.createElement(a.Z,null,r.createElement("div",{className:"layout-content"},r.createElement("h1",null,"Mentions légales"),c?"Fetching":null,Number.isNaN(t)&&r.createElement("p",{className:"fetch-error-message"},"Nous avons rencontré une erreur, merci de réessayer plus tard"),t&&t.length&&(e=t,r.createElement("ul",null,e.map((function(e){return r.createElement("li",{key:e.id},r.createElement("p",null,e.title),r.createElement("p",null,e.body))}))))))}},1363:function(e,n,t){t.d(n,{B:function(){return r}});var r=function(e){return e||[]}},7959:function(e,n,t){function r(e){e&&e.focus({preventScroll:!0}),window.scrollTo({top:(null==e?void 0:e.offsetTop)||0,behavior:"smooth"})}t.d(n,{Z:function(){return r}})},1628:function(e,n,t){t.d(n,{Z:function(){return s}});var r=t(5861),u=t(7757),a=t.n(u),i=t(9669),l=t.n(i),c=(t(7294),t(8767));function s(e){var n=e.key,t=e.API,u=e.staleTime,i=void 0===u?0:u,s=e.cacheTime,o=void 0===s?0:s,m=e.refetchOnMount,f=void 0!==m&&m,d=e.refetchOnWindowFocus,h=void 0!==d&&d,p=e.enabled,v=void 0===p||p;return(0,c.useQuery)(n,(0,r.Z)(a().mark((function e(){var n,r,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l().get(t);case 3:return n=e.sent,e.next=6,null==n?void 0:n.data;case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{error:!0,status:null===e.t0||void 0===e.t0||null===(u=e.t0.response)||void 0===u?void 0:u.status});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),{staleTime:i,cacheTime:o,refetchOnMount:f,refetchOnWindowFocus:h,enabled:v})}}}]);